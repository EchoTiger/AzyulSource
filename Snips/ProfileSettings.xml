<CustomBehavior File="RunCode" Type="Definition">
	<![CDATA[private static System.Windows.Window _uiWindow{get;set;}public static void Initialize(){Settings.Instance.Load();System.Windows.Application.Current.Dispatcher.BeginInvoke((Action)(()=>{var grid=(System.Windows.Controls.Grid)((Honorbuddy.MainWindow)System.Windows.Application.Current.MainWindow).Content;var profileConfigButton=grid.Children.OfType<System.Windows.Controls.Button>().FirstOrDefault(btn=>btn.Name=="btnProfileSettings");if(profileConfigButton!=null)return;profileConfigButton=new System.Windows.Controls.Button{Name="btnProfileSettings",HorizontalAlignment=System.Windows.HorizontalAlignment.Right,VerticalAlignment=System.Windows.VerticalAlignment.Bottom,Margin=new System.Windows.Thickness(0,0,8,55),Content="Profile Config",Height=20,Width=120};grid.Children.Add(profileConfigButton);profileConfigButton.Click+=(sender,args)=>{System.Windows.Application.Current.Dispatcher.BeginInvoke((Action)(()=>{if(_uiWindow!=null){_uiWindow.Close();_uiWindow=null;}Settings.Instance.Load();_uiWindow=UiWindow.GetWindow();_uiWindow.Show();_uiWindow.Closing+=(o,eventArgs)=>{Settings.Instance.Save();};}));};}));Styx.CommonBot.BotEvents.OnBotStopped+=args=>{System.Windows.Application.Current.Dispatcher.BeginInvoke((Action)(()=>{var grid=(System.Windows.Controls.Grid)((Honorbuddy.MainWindow)System.Windows.Application.Current.MainWindow).Content;var profileConfigButton=grid.Children.OfType<System.Windows.Controls.Button>().FirstOrDefault(btn=>btn.Name=="btnProfileSettings");grid.Children.Remove(profileConfigButton);_uiWindow.Close();}));};Styx.CommonBot.TreeRoot.OnShutdownRequested+=(sender,args)=>{System.Windows.Application.Current.Dispatcher.BeginInvoke((Action)(()=>{_uiWindow.Close();}));};}public static class UiWindow{public static System.Windows.Window GetWindow(){var window=new System.Windows.Window{Title="Profile Settings",SizeToContent=System.Windows.SizeToContent.WidthAndHeight,ResizeMode=System.Windows.ResizeMode.NoResize,DataContext=Settings.Instance};var grid=new System.Windows.Controls.Grid{Width=500,Height=550};window.Content=grid;var cloudLogo=new System.Windows.Controls.MediaElement{LoadedBehavior=System.Windows.Controls.MediaState.Play,VerticalAlignment=System.Windows.VerticalAlignment.Top,HorizontalAlignment=System.Windows.HorizontalAlignment.Center};cloudLogo.MediaEnded+=(sender,args)=>{cloudLogo.Position=TimeSpan.FromMilliseconds(1);};grid.Children.Add(cloudLogo);var skypeButton=new System.Windows.Controls.Button{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Margin=new System.Windows.Thickness(10,10,0,0),Style=new System.Windows.Style(),Background=System.Windows.Media.Brushes.Transparent,BorderThickness=new System.Windows.Thickness(0),Cursor=System.Windows.Input.Cursors.Hand};skypeButton.Click+=(sender,args)=>{Process.Start("skype:?chat&blob=F_wY5vlEdE1RnlhMr6ktHy4I804hlMlIPjU0S_FX9TbdLXNYjOfKKEOvHvCaRvqcNZIbM3OnT2LZeOFecfVCcTkVFNoMltkZX5dz61r7ebeUSJ1aE0rNIHEmThJKQIptFKWsdGpWwqZGbo7coz8s5J96gP3SvKwy5WTU4H7SopiukgAgL4FBT7E1JUqAlj57Kqgd6ALUNJibLdI");};grid.Children.Add(skypeButton);var skypeImage=new System.Windows.Controls.Image{Height=30,Width=30,Style=new System.Windows.Style()};skypeButton.Content=skypeImage;var paypalButton=new System.Windows.Controls.Button{HorizontalAlignment=System.Windows.HorizontalAlignment.Right,VerticalAlignment=System.Windows.VerticalAlignment.Top,Margin=new System.Windows.Thickness(0,10,10,0),Style=new System.Windows.Style(),Background=System.Windows.Media.Brushes.Transparent,BorderThickness=new System.Windows.Thickness(0),Cursor=System.Windows.Input.Cursors.Hand};paypalButton.Click+=(sender,args)=>{Process.Start("http://donate.ech-o.net/");};grid.Children.Add(paypalButton);var paypalImage=new System.Windows.Controls.Image{Height=30,Width=30,Style=new System.Windows.Style()};paypalButton.Content=paypalImage;var tabControl=new System.Windows.Controls.TabControl{Margin=new System.Windows.Thickness(0,150,0,0)};grid.Children.Add(tabControl);var changelogTab=new System.Windows.Controls.TabItem{Header="Changelog",Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(66,189,255))};tabControl.Items.Add(changelogTab);changelogTab.GotFocus+=(sender,args)=>{changelogTab.Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(73,96,210));};changelogTab.LostFocus+=(sender,args)=>{changelogTab.Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(66,189,255));};changelogTab.Focus();var changelogTextBox=new System.Windows.Controls.RichTextBox{Margin=new System.Windows.Thickness(10),VerticalScrollBarVisibility=System.Windows.Controls.ScrollBarVisibility.Auto,IsReadOnly=true,SelectionOpacity=0};changelogTab.Content=changelogTextBox;var generalTab=new System.Windows.Controls.TabItem{Header="General",Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(66,189,255))};tabControl.Items.Add(generalTab);generalTab.GotFocus+=(sender,args)=>{generalTab.Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(73,96,210));};generalTab.LostFocus+=(sender,args)=>{generalTab.Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(66,189,255));};var generalGrid=new System.Windows.Controls.Grid();generalTab.Content=generalGrid;var mailLabel=new System.Windows.Controls.Label{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Margin=new System.Windows.Thickness(41,72,0,0),Content="Mail Min Bag Slots"};generalGrid.Children.Add(mailLabel);var mailSlotsTextBox=new System.Windows.Controls.TextBox{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Height=23,Width=40,Margin=new System.Windows.Thickness(167,73,0,0)};generalGrid.Children.Add(mailSlotsTextBox);mailSlotsTextBox.SetBinding(System.Windows.Controls.TextBox.TextProperty,new System.Windows.Data.Binding(nameof(Settings.Instance.MailMinBagSlots)){Source=Settings.Instance});var vendorLabel=new System.Windows.Controls.Label{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Margin=new System.Windows.Thickness(41,118,0,0),Content="Vendor Min Bag Slots"};generalGrid.Children.Add(vendorLabel);var vendorSlotsTextBox=new System.Windows.Controls.TextBox{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Height=23,Width=40,Margin=new System.Windows.Thickness(167,120,0,0)};generalGrid.Children.Add(vendorSlotsTextBox);vendorSlotsTextBox.SetBinding(System.Windows.Controls.TextBox.TextProperty,new System.Windows.Data.Binding(nameof(Settings.Instance.VendorMinBagSlots)){Source=Settings.Instance});var depositGoldCheckBox=new System.Windows.Controls.CheckBox{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Margin=new System.Windows.Thickness(272,75,0,0),Content="Deposit Gold"};generalGrid.Children.Add(depositGoldCheckBox);depositGoldCheckBox.SetBinding(System.Windows.Controls.CheckBox.IsCheckedProperty,new System.Windows.Data.Binding(nameof(Settings.Instance.DepositGold)){Source=Settings.Instance});var depositItemsCheckBox=new System.Windows.Controls.CheckBox{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Margin=new System.Windows.Thickness(272,105,0,0),Content="Deposit Items"};generalGrid.Children.Add(depositItemsCheckBox);depositItemsCheckBox.SetBinding(System.Windows.Controls.CheckBox.IsCheckedProperty,new System.Windows.Data.Binding(nameof(Settings.Instance.DepositItems)){Source=Settings.Instance});var useDefensiveHooks=new System.Windows.Controls.CheckBox{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Margin=new System.Windows.Thickness(272,145,0,0),Content="Use Defensive Hooks"};generalGrid.Children.Add(useDefensiveHooks);useDefensiveHooks.SetBinding(System.Windows.Controls.CheckBox.IsCheckedProperty,new System.Windows.Data.Binding(nameof(Settings.Instance.UseDefensiveHooks)){Source=Settings.Instance});var useSpeedBuffs=new System.Windows.Controls.CheckBox{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Margin=new System.Windows.Thickness(272,175,0,0),Content="Use Speed Buffs"};generalGrid.Children.Add(useSpeedBuffs);useSpeedBuffs.SetBinding(System.Windows.Controls.CheckBox.IsCheckedProperty,new System.Windows.Data.Binding(nameof(Settings.Instance.UseSpeedBuffs)){Source=Settings.Instance});var protectedItemsTab=new System.Windows.Controls.TabItem{Header="Protected Items",Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(66,189,255))};tabControl.Items.Add(protectedItemsTab);protectedItemsTab.GotFocus+=(sender,args)=>{protectedItemsTab.Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(73,96,210));};protectedItemsTab.LostFocus+=(sender,args)=>{protectedItemsTab.Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(66,189,255));};var protectedItemsGrid=new System.Windows.Controls.Grid();protectedItemsTab.Content=protectedItemsGrid;var protectedListBox=new System.Windows.Controls.ListBox{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Height=350,Width=230,Margin=new System.Windows.Thickness(10,10,0,0)};protectedItemsGrid.Children.Add(protectedListBox);protectedListBox.SetBinding(System.Windows.Controls.ListBox.ItemsSourceProperty,new System.Windows.Data.Binding(nameof(Settings.Instance.ProtectedItemNames)){Source=Settings.Instance});var protectedItemsLabel=new System.Windows.Controls.Label{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Margin=new System.Windows.Thickness(260,70,0,0),Content="These items will not be sold"};protectedItemsGrid.Children.Add(protectedItemsLabel);var protectedTextBox=new System.Windows.Controls.TextBox{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Width=213,Height=23,Margin=new System.Windows.Thickness(260,143,0,0)};protectedItemsGrid.Children.Add(protectedTextBox);var protectedAddButton=new System.Windows.Controls.Button{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Width=75,Margin=new System.Windows.Thickness(398,171,0,0),Content="Add"};protectedItemsGrid.Children.Add(protectedAddButton);protectedAddButton.Click+=(sender,args)=>{var newItem=protectedTextBox.Text;if(string.IsNullOrWhiteSpace(newItem))return;Settings.Instance.ProtectedItemNames.Add(newItem);protectedTextBox.Text=string.Empty;};var protectedRemoveButton=new System.Windows.Controls.Button{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Width=75,Margin=new System.Windows.Thickness(245,343,0,0),Content="Remove"};protectedItemsGrid.Children.Add(protectedRemoveButton);protectedRemoveButton.Click+=(sender,args)=>{var selectedIndex=protectedListBox.SelectedIndex;if(selectedIndex==-1)return;Settings.Instance.ProtectedItemNames.RemoveAt(selectedIndex);};var depositItemsTab=new System.Windows.Controls.TabItem{Header="Deposit Items",Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(66,189,255))};tabControl.Items.Add(depositItemsTab);depositItemsTab.GotFocus+=(sender,args)=>{depositItemsTab.Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(73,96,210));};depositItemsTab.LostFocus+=(sender,args)=>{depositItemsTab.Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(66,189,255));};var depositItemsGrid=new System.Windows.Controls.Grid();depositItemsTab.Content=depositItemsGrid;var depositListBox=new System.Windows.Controls.ListBox{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Height=350,Width=230,Margin=new System.Windows.Thickness(10,10,0,0)};depositItemsGrid.Children.Add(depositListBox);depositListBox.SetBinding(System.Windows.Controls.ListBox.ItemsSourceProperty,new System.Windows.Data.Binding(nameof(Settings.Instance.DepositItemNames)){Source=Settings.Instance});var depositItemsLabel=new System.Windows.Controls.Label{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Margin=new System.Windows.Thickness(260,70,0,0),Content="These items will be put in the guild bank"};depositItemsGrid.Children.Add(depositItemsLabel);var depositTextBox=new System.Windows.Controls.TextBox{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Width=213,Height=23,Margin=new System.Windows.Thickness(260,143,0,0)};depositItemsGrid.Children.Add(depositTextBox);var depositAddButton=new System.Windows.Controls.Button{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Width=75,Margin=new System.Windows.Thickness(398,171,0,0),Content="Add"};depositItemsGrid.Children.Add(depositAddButton);depositAddButton.Click+=(sender,args)=>{var newItem=depositTextBox.Text;if(string.IsNullOrWhiteSpace(newItem))return;Settings.Instance.DepositItemNames.Add(newItem);depositTextBox.Text=string.Empty;};var depositRemoveButton=new System.Windows.Controls.Button{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Width=75,Margin=new System.Windows.Thickness(245,343,0,0),Content="Remove"};depositItemsGrid.Children.Add(depositRemoveButton);depositRemoveButton.Click+=(sender,args)=>{var selectedIndex=depositListBox.SelectedIndex;if(selectedIndex==-1)return;Settings.Instance.DepositItemNames.RemoveAt(selectedIndex);};var deleteItemsTab=new System.Windows.Controls.TabItem{Header="Delete Items",Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(66,189,255))};tabControl.Items.Add(deleteItemsTab);deleteItemsTab.GotFocus+=(sender,args)=>{deleteItemsTab.Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(73,96,210));};deleteItemsTab.LostFocus+=(sender,args)=>{deleteItemsTab.Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(66,189,255));};var deleteItemsGrid=new System.Windows.Controls.Grid();deleteItemsTab.Content=deleteItemsGrid;var deleteListBox=new System.Windows.Controls.ListBox{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Height=350,Width=230,Margin=new System.Windows.Thickness(10,10,0,0)};deleteItemsGrid.Children.Add(deleteListBox);deleteListBox.SetBinding(System.Windows.Controls.ListBox.ItemsSourceProperty,new System.Windows.Data.Binding(nameof(Settings.Instance.DeleteItemNames)){Source=Settings.Instance});var deleteItemsLabel=new System.Windows.Controls.Label{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Margin=new System.Windows.Thickness(260,70,0,0),Content="These items will be deleted"};deleteItemsGrid.Children.Add(deleteItemsLabel);var deleteTextBox=new System.Windows.Controls.TextBox{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Width=213,Height=23,Margin=new System.Windows.Thickness(260,143,0,0)};deleteItemsGrid.Children.Add(deleteTextBox);var deleteAddButton=new System.Windows.Controls.Button{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Width=75,Margin=new System.Windows.Thickness(398,171,0,0),Content="Add"};deleteItemsGrid.Children.Add(deleteAddButton);deleteAddButton.Click+=(sender,args)=>{var newItem=deleteTextBox.Text;if(string.IsNullOrWhiteSpace(newItem))return;Settings.Instance.DeleteItemNames.Add(newItem);deleteTextBox.Text=string.Empty;};var deleteRemoveButton=new System.Windows.Controls.Button{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Width=75,Margin=new System.Windows.Thickness(245,343,0,0),Content="Remove"};deleteItemsGrid.Children.Add(deleteRemoveButton);deleteRemoveButton.Click+=(sender,args)=>{var selectedIndex=deleteListBox.SelectedIndex;if(selectedIndex==-1)return;Settings.Instance.DeleteItemNames.RemoveAt(selectedIndex);};Task.WhenAll(LoadChangelogAsync(window,changelogTextBox),LoadSkypeImageAsync(window,skypeImage),LoadPaypalImageAsync(window,paypalImage),LoadAzyulLogoAsync(window,cloudLogo));return window;}private static async Task LoadChangelogAsync(System.Windows.Window window,System.Windows.Controls.RichTextBox changelogTextBox){await window.Dispatcher.BeginInvoke(new Action(async()=>{using(var client=new System.Net.WebClient()){var str=await client.DownloadStringTaskAsync("http://azyulcloud.azurewebsites.net/azyulsource/changelog");using(var stream=new MemoryStream(System.Text.Encoding.Default.GetBytes(str))){changelogTextBox.Selection.Load(stream,System.Windows.DataFormats.Rtf);}}}));}private static async Task LoadSkypeImageAsync(System.Windows.Window window,System.Windows.Controls.Image imageControl){await window.Dispatcher.BeginInvoke(new Action(async()=>{using(var client=new System.Net.WebClient()){var str=await client.DownloadDataTaskAsync("http://azyul.com/skype.gif");using(var stream=new MemoryStream(str)){var bitmap=new System.Windows.Media.Imaging.BitmapImage();bitmap.BeginInit();bitmap.StreamSource=stream;bitmap.CacheOption=System.Windows.Media.Imaging.BitmapCacheOption.OnLoad;bitmap.EndInit();bitmap.Freeze();imageControl.Source=bitmap;}}}));}private static async Task LoadPaypalImageAsync(System.Windows.Window window,System.Windows.Controls.Image imageControl){await window.Dispatcher.BeginInvoke(new Action(async()=>{using(var client=new System.Net.WebClient()){var str=await client.DownloadDataTaskAsync("http://azyul.com/paypal.gif");using(var stream=new MemoryStream(str)){var bitmap=new System.Windows.Media.Imaging.BitmapImage();bitmap.BeginInit();bitmap.StreamSource=stream;bitmap.CacheOption=System.Windows.Media.Imaging.BitmapCacheOption.OnLoad;bitmap.EndInit();bitmap.Freeze();imageControl.Source=bitmap;}}}));}private static async Task LoadAzyulLogoAsync(System.Windows.Window window,System.Windows.Controls.MediaElement mediaElement){await window.Dispatcher.BeginInvoke(new Action(async()=>{var savedImagePath=Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData),"Azyul Cloud","azyulsettings.gif");if(savedImagePath==null)return;if(File.Exists(savedImagePath)){mediaElement.Source=new Uri(savedImagePath);}else{mediaElement.Source=new Uri("http://azyul.com/Azyul%20Cloud%20Animted.jpg");var directory=Path.GetDirectoryName(savedImagePath);if(directory==null)return;if(!Directory.Exists(directory)){Directory.CreateDirectory(directory);}using(var client=new System.Net.WebClient()){await client.DownloadFileTaskAsync("http://azyul.com/azyulsettings.gif",savedImagePath);if(File.Exists(savedImagePath)){mediaElement.Source=new Uri(savedImagePath);}}}}));}}public class Settings : System.ComponentModel.INotifyPropertyChanged{private readonly string _filePath;private readonly string _jsonLocation;private bool _depositGold=true;private bool _depositItems=true;private int _mailMinBagSlots=20;private int _pullDensity=1;private bool _useDefensiveHooks=true;private bool _useSpeedBuffs=true;private int _vendorMinBagSlots=17;private Settings(){var hbLocation=Path.GetDirectoryName(System.Reflection.Assembly.GetEntryAssembly().Location);_jsonLocation=Path.Combine(hbLocation,"Newtonsoft.Json.dll");_filePath=Path.Combine(hbLocation,"Settings","AzyulCloud.json");}public System.Collections.ObjectModel.ObservableCollection<string>DeleteItemNames{get;set;}=new System.Collections.ObjectModel.ObservableCollection<string>();public bool DepositGold{get{return _depositGold;}set{if(value==_depositGold)return;_depositGold=value;OnPropertyChanged();}}public System.Collections.ObjectModel.ObservableCollection<string>DepositItemNames{get;set;}=new System.Collections.ObjectModel.ObservableCollection<string>();public bool DepositItems{get{return _depositItems;}set{if(value==_depositItems)return;_depositItems=value;OnPropertyChanged();}}public static Settings Instance{get;private set;}=new Settings();public int MailMinBagSlots{get{return _mailMinBagSlots;}set{if(value==_mailMinBagSlots)return;_mailMinBagSlots=value;OnPropertyChanged();}}public System.Collections.ObjectModel.ObservableCollection<string>ProtectedItemNames{get;set;}=new System.Collections.ObjectModel.ObservableCollection<string>();public bool UseDefensiveHooks{get{return _useDefensiveHooks;}set{if(value==_useDefensiveHooks)return;_useDefensiveHooks=value;OnPropertyChanged();}}public bool UseSpeedBuffs{get{return _useSpeedBuffs;}set{if(value==_useSpeedBuffs)return;_useSpeedBuffs=value;OnPropertyChanged();}}public int VendorMinBagSlots{get{return _vendorMinBagSlots;}set{if(value==_vendorMinBagSlots)return;_vendorMinBagSlots=value;OnPropertyChanged();}}public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;public void Load(){try{if(File.Exists(_filePath)){var assembly=AppDomain.CurrentDomain.GetAssemblies().FirstOrDefault(a=>a.FullName.Contains("Newtonsoft.Json"))?? System.Reflection.Assembly.LoadFrom(_jsonLocation);var jsonConvert=assembly.GetTypes().FirstOrDefault(a=>a.FullName=="Newtonsoft.Json.JsonConvert");var json=string.Empty;using(var streamReader=new StreamReader(_filePath)){json=streamReader.ReadToEnd();}var populateObject=jsonConvert.GetMethods().FirstOrDefault(m=>m.Name=="PopulateObject");Instance.ProtectedItemNames.Clear();Instance.DepositItemNames.Clear();Instance.DeleteItemNames.Clear();populateObject.Invoke(null,new object[]{json,Instance});}}catch(Exception ex){Logging.Write(ex.Message);}}private void OnPropertyChanged([System.Runtime.CompilerServices.CallerMemberName] string propertyName=null){PropertyChanged?.Invoke(this,new System.ComponentModel.PropertyChangedEventArgs(propertyName));}public void Save(){try{var assembly=AppDomain.CurrentDomain.GetAssemblies().FirstOrDefault(a=>a.FullName.Contains("Newtonsoft.Json"))?? System.Reflection.Assembly.LoadFrom(_jsonLocation);var jsonConvert=assembly.GetTypes().FirstOrDefault(a=>a.FullName=="Newtonsoft.Json.JsonConvert");var serializeObject=jsonConvert.GetMethods().FirstOrDefault(m=>m.Name=="SerializeObject");var content=(string)serializeObject.Invoke(null,new object[]{this});using(var streamWriter=new StreamWriter(_filePath)){streamWriter.WriteLine(content);}}catch(Exception ex){Logging.Write(ex.Message);}}}]]>
</CustomBehavior>

<CustomBehavior File="RunCode" Code="Initialize();"/>